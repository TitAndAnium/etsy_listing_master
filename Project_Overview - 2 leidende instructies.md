Overkoepelend Doel en Kernprincipes
Waarom dit project? Het Etsy AI-Hacker project is opgezet om Etsy-verkopers te helpen hoogwaardige, converterende productlistings te genereren die voldoen aan alle Etsy-regels, volledig zijn afgestemd op de beoogde koper, en auditbaar tot stand komen. Bestaande AI-tools schieten tekort â€“ ze leveren vaak generieke output die slecht verkoopt, niet compliant is met Etsyâ€™s policies en de doelgroep niet aanspreekt. Dit project bouwt daarom geen simpele AI-tool, maar een transparante backend-infrastructuur die verhaal, algoritme, regels en validatie combineert tot betrouwbare output. Enkele kernprincipes:
Etsy-compliance: Alle gegenereerde content moet strikt voldoen aan Etsyâ€™s contentbeleid. Daarom gelden strenge format- en inhoudsregels, zoals alleen ASCII-tekens, geen emoji of opmaak, titels â‰¤ 140 tekens, tags â‰¤ 20 tekens. Verboden elementen (links, prijzen, absolute claims als â€œbesteâ€ etc.) worden nooit in de output opgenomen. Het systeem bewaakt continu deze regels, zodat elke titel, tag en beschrijving platform-compliant is.
Gift-optimalisatie: Cadeau-intentie staat centraal waar van toepassing. Het systeem herkent of iets een gift is (koper â‰  ontvanger) en past toon en inhoud daarop aan. In Gift Mode voegt de AI emotionele en relationele accenten toe: zinnen als â€œperfect cadeau voorâ€¦â€, nadruk op gelegenheid en relatie, enzovoort. Etsy beloont listings met gift-gerichte content, dus dit project maakt cadeau-opties een geÃ¯ntegreerd onderdeel van elke prompt. Het resultaat is dat de output inspeelt op de psychologie van cadeaugevers, wat de conversie verhoogt.
Doelgroepgerichtheid: De AI schrijft voor de koper/ontvanger, niet voor de verkoper. Alle content wordt afgestemd op demografie, subcultuur en situatie van de beoogde ontvanger. Via audience profiles en tone-of-voice regels (zie audience_profile_rules.txt en tone_style_v2.5.txt) zorgt het systeem dat de toon, stijl en woordkeuze resoneren met bijvoorbeeld â€œtrendy Gen Zâ€, â€œgevoelige grootouderâ€ of â€œluxeliefhebberâ€ â€“ al naar gelang de doelgroep. Deze segmentatie beÃ¯nvloedt elke laag: van tags tot beschrijving, zodat de listing raak is voor de juiste doelgroep.
AI-transparantie: In tegenstelling tot black-box AIâ€™s toont dit systeem exacte context en redenaties achter de output. Bij elke run logt de AI waarom een bepaalde tone-of-voice is gekozen, of waarom bepaalde keywords verschijnen. In de UI kan een gebruiker bijvoorbeeld zien: â€œtone_profile: playful-youth, reason: detected bachelorette gift for age 18-25â€. De AI is zo een co-pilot die zijn keuzes uitlegt en live bijstuurt op basis van feedback (SDR, zie verder). Dit vergroot vertrouwen en bestuurbaarheid van de AI.
Validatie & Fallback: No bad output. Het systeem kent meerdere validatielagen om foutieve of onvolledige AI-output te voorkomen. Alle AI-antwoorden worden vÃ³Ã³r tonen gevalideerd op JSON-format, verplichte velden en inhoudelijke kwaliteit. Indien een veld ontbreekt of niet aan de eisen voldoet, grijpt de AI meteen in: ofwel correctie van het resultaat (bijv. te lange tags worden ingekort), of een gerichte regeneratie/fallback voor dat veld. Fallbacks zijn semantisch verantwoord â€“ geen ongecontroleerde tweede AI-poging, maar een gerichte prompt (of in laatste instantie een eenvoudiger model) om alsnog een geldig resultaat te krijgen. Liever gÃ©Ã©n output dan ongeldige output: het systeem zal nooit iets doorlaten dat Etsy of de gebruiker in problemen brengt.
Reproduceerbaarheid & Audit: Elke beslissing, elke stap en elke AI-output wordt gelogd en versie-gecontroleerd. Belangrijke keuzes zijn traceerbaar in project_decisions_and_logs.md met tijdstempel, reden en versie. Promptbestanden dragen versienummers en wijzigingen worden chronologisch vastgelegd, zodat later nog precies te herleiden is welke promptversie welke output genereerde. Dit maakt het systeem niet alleen robuust maar ook wetenschappelijk reproduceerbaar: een toekomstige AI-dev kan dezelfde input onder dezelfde condities voeren en dezelfde output verwachten. Het project heeft daarmee een â€œsingle source of truthâ€: alle kennis, regels en wijzigingen zijn centraal gedocumenteerd en blijven bewaard voor audits en iteraties.
Modulariteit & Uitbreidbaarheid: Het systeem is ontworpen als set van losse componenten die elk vervangbaar of updatebaar zijn zonder de hele flow te breken. Promptversies kunnen eenvoudig worden vervangen of opgevoerd (met mapping in de prompt router). Validatieregels staan los in aparte modules die uitbreidbaar zijn. De AI-provider (OpenAI) is abstract gemaakt zodat desgewenst een alternatief model kan worden aangesloten. Deze modulair-opzet zorgt ervoor dat nieuwe functies â€“ van image-to-product tot meertalige support â€“ later kunnen worden toegevoegd op een stabiele basis.
Samengevat overbrugt Etsy AI-Hacker de kloof tussen verkoper en Etsy-algoritme: het fungeert tegelijk als AI co-pilot (intelligent, contextueel, stuurbaar), validatie-engine (garandeert naleving Etsy-regels), commerciÃ«le gids (denkt mee in koopmotieven en tone-of-voice) en logging-backbone (transparant en schaalbaar). Het unieke is dat deze AI niet alleen tekst genereert, maar ook reflecteert, leert van context, terugkoppelt en logt waarom iets gebeurt. Dit vormt het fundament waarop we voortbouwen.
Systeemoverzicht en Rol van Cascade
Cascade is de uitvoerende AI-assistent binnen dit project. Het draait in de Windsurf-ontwikkelomgeving en fungeert als bewuste orkestrator van de AI-logica. Cascade gedraagt zich als een slimme programmeerpartner die meeloopt met elke stap: het leest projectbestanden, interpreteert context, controleert output en zorgt voor logging. Enkele eigenschappen van Cascade in dit project:
Contextbewust: Cascade heeft volledige toegang tot de projectmap (inclusief alle /docs en /functions/prompts bestanden) en gebruikt die als bron van waarheid. Elke keer dat een prompt wordt opgebouwd of een validatie plaatsvindt, haalt Cascade de meest recente regels en instructies op uit de lokale bestanden. Zo garandeert het systeem dat altijd de laatste versies van bijvoorbeeld etsy_rules.txt of een prompttemplate worden toegepast.
Validerend, niet herschrijvend: Cascade past de promptinhoud zelf niet aan (het â€œherschrijft prompts nietâ€), maar waakt er wel over dat de prompts correct worden uitgevoerd en nageleefd. Bijvoorbeeld: als de promptresultaten JSON moeten zijn, controleert Cascade dat en zal het zo nodig ingrijpen als de AI zich niet aan het format houdt. Cascade extraheert relevante info en valideert het, maar de daadwerkelijke gegenereerde tekst komt uit de prompts zelf.
Ingebed in de flow: Cascade is geÃ¯ntegreerd in de backend van de applicatie. In de stap-voor-stap generatiepipeline speelt Cascade bij elke stap een rol:
Inputverwerking & Classificatie: Zodra de gebruiker input geeft â€“ hetzij een tekstbeschrijving, hetzij een afbeelding (of beide) â€“ start Cascade met classificeren. Tekstinvoer wordt opgeschoond (bijv. ontdaan van ongebruikelijke tekens of Etsy-HTML) via cleanEtsyDump. Bij een afbeelding roept Cascade een beeldmodel aan dat productkenmerken afleidt (product_type, stijltrend, materiaal, etc.). Deze visuele info is leidend; als de image classifier mislukt of ontbreekt, valt Cascade terug op een tekstuele AI-classifier (classifier_prompt.txt) om op basis van de beschrijving velden te bepalen. Denk hierbij aan velden als focus_keyword, product_type, audience, buyer_vs_receiver, style_trend, seasonal_context, tags, description, etc., die de kern van de listing vormen. Dit classificatieproces (ook wel SDR â€“ Semantische Doelgroep Reflectie genoemd in documentatie) zorgt dat de AI begrijpt â€œwatâ€ het item is en â€œvoor wieâ€ (bv. cadeau voor welke ontvanger, bij welke gelegenheid) voordat er tekst wordt gegenereerd.
Normalisatie & Fallbackvoorbereiding: Cascade voert vervolgens NormalizeClassifierOutput uit. Dit script vult automatisch ontbrekende velden aan met plausibele default-waarden, zodat de AI altijd een volledig startprofiel heeft. Voorbeeld: als de classifier geen specifieke doelgroep kan vinden, wordt een algemene doelgroep ingevuld (bv. vrouw van ~30 als default koper). Ontbreekt een style_trend, dan infereert de AI er een op basis van de beschikbare context (kleur, materiaal, omschrijving). Elke aangevulde waarde wordt gelogd met bron en confidence-score. Tegelijk voert Cascade validaties uit op de geclassificeerde velden: zijn alle tags ASCII en lowercase? Is de lengte van de titel kandidaat â‰¤ 140 tekens? Etc.. Indien iets nu al duidelijk ongeldig is, kan Cascade het veld markeren voor herziening. Uiteindelijk staat na deze stap een compleet en gecorrigeerd input object klaar met velden zoals focus_keyword, product_type, audience_profile, tone_profile, gift_mode, etc.. Deze vormen de context voor de daadwerkelijke contentgeneratie.
Promptconstructie & Routering: In deze fase stelt Cascade per veld een gespecialiseerde AI-prompt samen en genereert de outputvelden. Alle relevante contextvelden worden gebundeld in een contextobject dat met elke prompt meegestuurd wordt. Cascade gebruikt een PromptRouter module die bepaalt welke prompttemplate voor welk veld wordt gebruikt en of er afwijkingen of fallback nodig zijn. Voor elk veld (titel, tags, beschrijving) checkt de router:
Als de geclassificeerde context geldig lijkt (voldoet aan minimumvereisten) â†’ genereer direct met de standaard prompt.
Zo niet (bv. een essentieel onderdeel ontbreekt of een veld is gemarkeerd als twijfelachtig) â†’ pas een fallbackpad toe. Dit kan inhouden: een alternatieve prompt (bijv. een verkorte titelprompt als de standaard faalt) of een regeneratie met extra instructies.
Cascade logt voor elk veld welke keuze is gemaakt (direct vs fallback) en welke contextfiles zijn geÃ¯njecteerd. Vervolgens wordt de daadwerkelijke OpenAI API aangeroepen via generateAiOutput({field}), die de samengestelde prompt naar GPT stuurt en een reactie terugkrijgt. Cruciaal: de prompts zijn zo geschreven dat ze JSON-output opleveren in een vooraf gedefinieerd formaat. Cascade controleert de AI-respons en parseert deze JSON.
JSON-output bundelen: Als alle drie hoofdvelden succesvol gegenereerd zijn, bouwt Cascade een JSON-object op met de volledige listing: title, tags, description, plus eventueel extra gegenereerde velden (materials, etc.). Deze wordt teruggegeven aan de applicatie. Elk veld voldoet aan de structurele eisen (titel als string <140 karakters, tags als lijst van 13 strings, beschrijving als langere string met newline-separatie voor blokken). Mocht een veld ontbreken of onparseerbaar zijn, dan kan Cascade nog een herkansing doen voor alleen dat veld, of dit veld leeg laten met een foutmelding â€“ maar in praktijk is door de eerdere lagen dit zelden nodig.
User feedback & iteratie: De gebruiker krijgt de gegeneerde listing te zien en kan nu per veld ingrijpen. Het systeem biedt opties als: Regenereren (ğŸ”„) van een specifiek veld, bewerken (handmatig tekst aanpassen), of context toggles wijzigen (bv. een andere doelgroep kiezen, tone-of-voice aanpassen, Gift Mode aan/uit zetten). Als de gebruiker iets aanpast en een veld opnieuw door de AI laat genereren, loopt Cascade wederom de relevante stappen door (met hergebruik van de eerder geclassificeerde basis, maar aangepaste context). Dit kan kostbare API-calls schelen en zorgt voor consistentie: andere velden blijven behouden terwijl Ã©Ã©n veld wordt bijgesteld.
Logging & opslag: Na elke listing-run slaat Cascade alle belangrijke gegevens op. Iedere run krijgt een unieke run_id en er wordt in Firestore (database) een record weggeschreven met:
De originele gebruikersinput (inclusief eventueel plaatje of ruwe dump).
Alle door AI afgeleide velden en context (ai_fields oftewel de classificatie-output).
De finale gegenereerde outputvelden (final_output).
Een retry_status per veld (hoeveel pogingen nodig, fallback gebruikt ja/nee).
context_used (welke contextparameters en bestanden zijn gebruikt in prompts), prompt_details (welke promptversies) en fallback_info (of er fallbackmodel of -prompt is ingezet).
Een kwaliteitsindicator of scorecard met evaluaties (optioneel, bijv. of alle regels zijn gevolgd).
Hierdoor is elke run later te auditen. Ook intern logt Cascade events in text-bestanden: belangrijke beslissingen komen in project_decisions_and_logs.md (zie later), en debug-info zoals API-fouten of fallback-activeringen worden eveneens bijgehouden (bv. via openaiCallDebugger.js voor ontwikkelaars).
Deze gehele orchestratie door Cascade maakt het systeem robuust en zelfbewust. De AI â€œweetâ€ wat het aan het doen is dankzij de contextinjecties en past zichzelf aan waar nodig. Belangrijk is dat Cascade een discipline heeft om altijd testuser123 (dev-mode user) logging te forceren en enkel het krachtige model (GPT-4) te gebruiken behalve bij strikte noodzaak. Dat is in het systeem verankerd als extra waarborg. Cascade fungeert zo als garant dat de AI-uitvoer elke keer consistent de projectregels respecteert. (Ter referentie: de projectstructuur is logisch ingedeeld in domeinen: Strategie, Frontend, Backend, Database, Prompts, Creditsysteem, Testen, Flow-logica, Innovatie. Cascade beweegt zich vooral binnen Backend, Prompts en Validatielogica, maar grijpt eigenlijk in bij alle relevante domeinen om integriteit te bewaren.)
Belangrijke Contextbestanden en Regels
Het Etsy AI-Hacker project wordt aangestuurd door een reeks contextbestanden (meestal .txt of .md files) die alle domeinkennis, regels en promptinhoud bevatten. Een â€œblancoâ€ AI-agent moet deze bestanden inladen en toepassen om de juiste output te genereren. We beschrijven hier de belangrijkste bestanden uit de meegeleverde onebox-hacker bundel en hun rol:
Etsy platformregels â€“ etsy_rules.txt
Dit bestand definieert de compliance-regels waaraan alle output moet voldoen. Enkele hoofdpunten uit versie 2.0.0:
Formaatregels: ASCII-only voor alle tekst (geen speciale Unicode-tekens), geen emoji, geen slimme aanhalingstekens of andere typografische tekens. Tekst mag geen Markdown of HTML bevatten; opsommingstekens alleen in platte tekst (bv. - of *). Titels maximaal 140 karakters, tags maximaal 20 karakters per stuk. Tags altijd comma-separated en lowercase.
Verboden inhoud: Geen URLâ€™s of verwijzingen naar externe sites, geen kortingscodes of oproepen om buiten Etsy om te gaan kopen. Geen prijsinformatie in de listing (â€œslechts $9.99â€ is niet toegestaan). Vermijd superlatieven of claims die Etsyâ€™s beleid schenden (â€œbest verkochteâ€, â€œgegarandeerd de besteâ€). Evenmin subjectieve kwaliteiten vanuit verkopersperspectief (â€œhoogwaardige kwaliteit!â€) â€“ de AI blijft neutraal en laat beoordeling aan de koper.
SEO en structuur: Het hoofdzoekwoord moet in de eerste ~5 woorden van de titel voorkomen. Nooit dezelfde term onnodig herhalen in titel, tags en categorie (Etsy straft keyword stuffing af). Tags en titels moeten elkaar aanvullen in plaats van dupliceren. Gebruik de taal van kopers (zoektermen die klanten gebruiken) en vermijd intern jargon. Elke veldsoort (titel, tags, beschrijving) heeft een eigen SEO-doel:
Titel: zichtbaarheid van het kernzoekwoord + interesse wekken (â€œscroll-stopperâ€).
Tags: long-tail zoekbereik vergroten + taal van kopers vangen (synoniemen, varianten).
Beschrijving: converteren door verhaal en emotie, plus aanvullende keywords in context.
Inputprioriteit voor AI: (Deze sectie uit etsy_rules.txt bevestigt de cascade-logica.) Visuele input heeft voorrang op tekst. Als een gebruiker een afbeelding meestuurt, worden daarvan afgeleide kenmerken zwaarder gewogen â€“ dit is reeds in Cascade ingebouwd bij classificatie. Ruwe Etsy listing dumps (zoals gekopieerde JSON of HTML) moeten eerst opgeschoond worden voordat ze als context dienen.
Consistentie tussen velden: Tags mogen de titel of beschrijving niet tegenspreken qua tone-of-voice of intentie. Als personalization aan staat (zie later), moeten alle lagen van de listing rekening houden met personalisatie-opties (je belooft niets in titel wat in beschrijving ontbreekt, etc.). Ook moeten seizoen- of gelegenheidstermen (Christmas, Birthday) in elk relevant veld terugkomen zodra ze in Ã©Ã©n veld voorkomen, zodat er een samenhangend verhaal is naar de koper.
Kortom, etsy_rules.txt fungeert als basis-checklist voor alles wat gegenereerd wordt: van karaktergebruik tot inhoudelijke doâ€™s-and-donâ€™ts.
Gift Mode regels â€“ gift_rules_v2.txt
Deze regels (versie 2.0.0) sturen de AI specifiek wanneer de context aangeeft dat het product als cadeau bedoeld is (gift_mode = true). Ze zorgen voor een extra emotionele en situationele laag in de gegenereerde teksten. Belangrijkste logica:
Activering: Gift Mode treedt in werking als uit de input blijkt dat het om een cadeau gaat. Dit kan automatisch bepaald worden (bijv. de gebruiker selecteert â€œGiftâ€ of het systeem detecteert een occasion als â€œverjaardagâ€ of een relatie als â€œvoor mijn moederâ€ in de input), Ã³f via de gift toggle in de UI (handmatige activatie). Cascade injecteert dan gift_mode: true plus eventueel gift_emotion en receiver_profile in de promptcontext.
Kernregels bij gift_mode = true:
Leg de nadruk op het emotionele effect van het cadeau â€“ bijvoorbeeld gevoelens van verrassing, waardering, verbondenheid.
Pas de toon aan op basis van gift_emotion indien meegegeven (zie onder). Een romantisch cadeau vereist een warme toon, een grappig cadeau een speelse toon, etc.
Probeer de gelegenheid te benoemen als die niet expliciet is gegeven: is het waarschijnlijk een verjaardagsgift, kerstcadeau, bedankje? De AI mag dit infereren en verwerken (mits logisch).
Voeg cadeaugerichte frasen toe: bijvoorbeeld â€œhet perfecte cadeau voorâ€¦â€, â€œverras iemand metâ€¦â€, â€œeen geschenk dat laat zien datâ€¦â€.
Relatie tussen gever en ontvanger: verwerk de dynamiek (vriend, partner, ouder, collega) in de tekst. Een cadeau van een moeder aan een dochter formuleer je anders dan van vriend tot vriend.
Gebruik eventueel sociale bewijskracht/framing: bijvoorbeeld zinsneden die suggereren dat het cadeau in groepsverband leuk is (â€œvoor het hele teamâ€) of dat meerdere mensen ervan kunnen genieten.
Behoud een goede balans tussen persoonlijke toon en SEO: emotie is belangrijk, maar vergeet de zoekwoorden niet.
Buyer vs. receiver logica:
Als buyer â‰  receiver (de koper geeft het aan iemand): Noem de gelegenheid of relatie expliciet, benadruk de â€œgift-gedachteâ€ en waarom dit product goed past bij die ontvanger. Bijvoorbeeld: â€œA thoughtful anniversary gift for your wife â€“ show her you remember the little details.â€
Als buyer = receiver (men koopt voor zichzelf, geen cadeau): Voorkom dan dat onterecht cadeau-gerichte taal verschijnt. In feite zou Gift Mode dan uit moeten staan. Als het toch aan staat, kan de AI beter overschakelen naar redenen waarom het product voor de koper zelf waardevol is, zonder â€œcadeauâ€ te noemen. (Deze nuance is geÃ¯mplementeerd via het veld buyer_vs_receiver: waarden â€œgiverâ€ vs â€œreceiverâ€ om de prompt te beÃ¯nvloeden.)
Gift personas & typologieÃ«n: De regels stipuleren dat het systeem graag met gift personas gaat werken. Bijvoorbeeld: het herkent type ontvangers (â€œde gepassioneerde kookliefhebberâ€, â€œde modieuze tienerâ€) en type gevers (â€œde attente partnerâ€, â€œde grapjas vriendengroepâ€). Hoewel dit nog verder uitgewerkt moet worden (zie openstaande taken), is het idee dat latere versies van de AI gift profiles kunnen hanteren voor nog gerichtere output.
Voorbeelden van emotie/tone bij gift: In de documentatie is een tabel met Gift Emotie â†’ Toneprofiel. Enkele klassen:
Sentimental: Toon warm en beschouwend â€“ bv. â€œa memory theyâ€™ll treasureâ€.
Fun: Speels en informeel â€“ bv. â€œmade for laughs & joyâ€.
Elegant: Chic en minimalistisch â€“ bv. â€œunderstated, unforgettableâ€.
Ironic/TikTok: Jeugdig, edgy â€“ bv. â€œthe gift that says â€˜I get youâ€™â€.
Deze gift_emotion wordt door de AI of gebruiker gekozen en beÃ¯nvloedt woordkeuze en stijl direct.
Praktisch effect van gift_rules_v2.txt is dat Gift Mode doorwerkt in alle prompts:
In de titelprompt kan bijvoorbeeld aan het einde iets worden toegevoegd als â€œGift for [recipient]â€ of een synoniem daarvan.
De tagprompt zal cadeaugerelateerde termen injecteren (bijv. bridesmaid gift, gift for wife) en generieke producttermen juist weglaten ten gunste van gift-termen.
De beschrijvingsprompt voegt een verhaalelement toe rond het geven: waarom dit cadeau geven, hoe reageert de ontvanger, etc..
Etsy zelf geeft voorrang aan gift-georiÃ«nteerde listings (met name rond feestdagen), dus dit regelbestand is cruciaal om competitieve output te genereren.
Tone-of-Voice & Doelgroep â€“ tone_style_v2.5.txt en audience_profile_rules.txt
Tone & style regels: In tone_style_v2.5.txt staan de gedefinieerde tone-of-voice profielen die de AI kan hanteren, met hun nuances. Versie 2.5 bevat een â€œtoonladderâ€ van codes met omschrijving en voorbeeldzinnen. Enkele tone-profielen uit dit bestand:
soft-feminine: Empathisch, warm, zorgzaam â€“ bv. tekstfragment â€œa meaningful gift for herâ€.
playful-youth: Vlot, TikTok-achtig, informeel â€“ bv. â€œOMG, your bachelorette crew ğŸ’…â€.
coquette: Sensueel, licht ironisch, trendy â€“ bv. â€œfor your not-so-innocent sideâ€.
minimal-elegant: Rustig, clean, modern â€“ bv. â€œunderstated and beautifulâ€.
casual-neutral: Tijdloos, genderneutraal, relaxed â€“ bv. â€œperfect for any travelerâ€.
bold-direct: Krachtig, to-the-point, functioneel â€“ bv. â€œsturdy, practical, always readyâ€.
De AI kiest dynamisch een tone_profile op basis van context (tenzij de gebruiker expliciet een toon instelt). Factoren zijn onder meer:
Doelgroepsegment (leeftijd, gender, interesses),
Relatie koper-ontvanger (cadeau van ouder aan kind vergt andere toon dan tussen collegaâ€™s),
Producttype en gelegenheid (een rouwcadeau vs. een feestcadeau verschillen van toon),
Gift_emotion (zoals hierboven genoemd, stuurt dit ook de toon).
Het audience_profile_rules.txt bestand werkt hiermee samen. Hierin staan richtlijnen om op basis van demografische gegevens en doelgroepkenmerken de schrijfstijl en content te sturen. Bijvoorbeeld zou hierin kunnen staan dat voor â€œjonge tienermeidenâ€ meer emoticons of slang geaccepteerd zijn (binnen ASCII-beperkingen), of dat voor â€œzakelijke doelgroepâ€ de toon formeler moet. Ook bevat het subcultuur- en nichevoorbeelden (â€œstoere seniorenâ€, â€œchristelijke jongerenâ€) die de AI kan herkennen en expliciet benoemen in content. De AI-classificatie (SDR) probeert deze profielen te koppelen aan de input; wat niet direct afgeleid wordt, kan door de gebruiker achteraf gekozen worden via dropdowns (bijv. â€œDoelgroep: Sportliefhebbers (mannen 20-30)â€). In de praktijk gebruikt Cascade deze bestanden als volgt:
Tijdens de classificatie: op basis van input wordt een voorlopig audience_profile en tone_profile gekozen of voorgesteld.
Voor de promptgeneratie: de gekozen tone_profile wordt meegegeven als variabele in de promptcontext, zodat de prompt weet in welke stijl hij moet schrijven.
Na output: de gekozen tone_profile en doelgroep worden ook gecommuniceerd aan de gebruiker in het resultaat (â€œDeze tekst klinkt zo omdatâ€¦â€), zodat transparant is dat bijv. playful-youth was toegepast omdat de AI een jonge doelgroep en speelse gelegenheid herkende.
Met andere woorden, tone_style_v2.5.txt en audience_profile_rules.txt zorgen voor consistente, doelgerichte toon doorheen de titel, tags en beschrijving. De promptrouter waakt er ook over dat alle velden dezelfde tone_profile gebruiken voor coherentie. Dit voorkomt dat je een luchtige beschrijving hebt maar een houterige titel, of vice versa â€“ consistentie is key. (NB: Deze bestanden kunnen in toekomstige versies uitgebreid worden met meer profielen. De structuur is modulair, dus nieuwe tone-codes kunnen toegevoegd worden, mits de prompts en router daarmee overweg kunnen.)
Prompt-templates â€“ title_prompt_v2.txt, tag_prompt_v2.txt, description_prompt_v2.txt (enz.)
Dit zijn de kernpromptbestanden die de instructies bevatten voor de AI om respectievelijk een titel, tags en beschrijving te genereren. Ze zijn opgebouwd als string templates met placeholders voor contextvariabelen. Cascade laadt deze files in en vult ze aan met de actuele context (zoals focus_keyword, audience, tone_profile, etc.) alvorens de call naar de AI te doen. Belangrijke kenmerken van de promptbestanden:
Ze bevatten in de metadata een versienummer en type. Bijvoorbeeld title_prompt_v2.1.0.txt zoals genoemd in de documentatie. In onze projectmap heten ze op dit moment title_prompt_v2.txt (v2.0.0 in meta), tag_prompt_v2.txt, description_prompt_v2.txt. Eventuele updates zullen als nieuwe versie (v2.1, v2.2 etc.) worden opgeslagen of het versienummer in het bestand aangepast (zie Naming Conventie verderop).
JSON Output format: Alle prompts zijn zodanig geschreven dat de AI een JSON-object terugstuurt. In de prompt staat typisch een instructie of een OpenAI function call schema (bijv. response_format: { type: "json_object" }) die de AI dwingt om alleen geldig JSON te geven. Hierdoor krijgen we gestructureerde output. Bijvoorbeeld zal de titel-prompt iets vragen als: â€œGeef uitsluitend een JSON met veld 'title' als sleutel en de gegenereerde titel als waarde.â€ Cascade verwacht en valideert deze structuur. Dit voorkomt ongewenste extra tekst of excuses van de AI.
Gebruik van contextfiles: De prompttemplates zelf refereren aan stukken context uit de eerder genoemde regelbestanden. Cascade voegt mogelijk snippets uit regels in de prompt (contextinjectie). Bijvoorbeeld kan in de description-prompt een sectie uit etsy_rules.txt worden ingevoegd als herinnering aan ASCII-only, of kan de content van gift_rules_v2.txt (relevante delen) worden meegegeven wanneer gift_mode true is. Dit gebeurt via de functie buildPromptWithContext() in code, die templates en context samenvoegt (incl. stukken tekst uit de rules-files als needed). Hierdoor kent de AI altijd de actuele regels en context, zonder dat deze hard in de code staan.
Placeholder-strategie: In de prompt staan placeholders zoals {focus_keyword}, {product_type}, {audience_profile}, enz. Tijdens runtime vervangt Cascade die door de daadwerkelijk geclassificeerde of door de gebruiker gekozen waarden. Ook hele blokken context kunnen als placeholder worden opgenomen, bijvoorbeeld {gift_guidelines} die gevuld wordt met een samenvatting van gift_rules als gift_mode aan staat. Deze aanpak zorgt dat de prompts modulair en schoon blijven.
Speciale rol-prompting: Elke promptfile kadert de AI in een bepaalde rol of expertise. Bijvoorbeeld de title-prompt benadert de AI als â€œSEO-strateegâ€ en â€œkeywordspecialistâ€, de tag-prompt als â€œEtsy tag-expertâ€, de description-prompt als â€œcreatieve copywriter en kooppsycholoogâ€. Dit is expliciet in de prompt verwoord (bijv. â€œJe bent een ervaren Etsy SEO specialist. Schrijf een titel...â€). Deze rollen zorgen dat de toon en insteek per veld anders is maar wel passend bij het veld.
Fallback-prompts: Er bestaan ook alternatieve promptbestanden voor fallback-scenarioâ€™s. Uit de logs blijkt dat we bijvoorbeeld title_short_prompt.txt, tags_fallback_prompt.txt, minimal_description_prompt.txt hebben. Deze worden gebruikt als de hoofdprompt geen geldige output opleverde. Bijvoorbeeld als de description-prompt te veel tekst geeft die niet voldoet, zou minimal_description_prompt.txt een sterk verkorte beschrijving kunnen genereren als noodoplossing. Dergelijke fallbacks zijn echter alleen voor noodgevallen; in principe moet de hoofdprompt met goede context het altijd juist doen.
Opmerking: De promptbestanden moeten nooit blind aangepast worden zonder het versienummer te verhogen en de impact te overzien. Ze zijn nauw afgestemd op de contextinvoer en validatie. Grotere wijzigingen vereisen heruitvoering van testcases (zie verder) en documentatie-updates.
Validatieregels per veld â€“ title_rules.txt, tag_rules.txt, description_rules.txt
Naast het algemene Etsy-regelbestand zijn er specifieke regels per veldtype, vervat in bovengenoemde bestanden (versie 2.0.0 elk). Deze dienen als extra controleposten voor respectievelijk titels, tags en beschrijvingen. In hoofdlijnen:
Titelregels (title_rules.txt): Max 140 tekens, hoofdkeyword vooraan (eerste ~5 woorden), niet volledig in hoofdletters (hooguit 1 woord in ALL CAPS), geen emoji of vreemde tekens, geen herhaling van woorden of overbodige interpunctie. Ook moet de titel enkelvoudig zijn: niet meerdere producten/prodcuttypen in Ã©Ã©n titel proppen (dus niet â€œRing/Armband/Necklace giftâ€ â€“ focus op Ã©Ã©n product). Deze regels waarborgen dat de titel duidelijk, zoekmachinevriendelijk en conform Etsyâ€™s title policy is.
Tagregels (tag_rules.txt): Exact 13 tags, niet meer niet minder. Elke tag â‰¤ 20 karakters. Alleen kleine letters en alfanumeriek (ASCII). Geen duplicaten of dichtbije synoniemen onder de tags â€“ elke tag moet iets unieks bijdragen. Tags moeten relevant zijn en idealiter een mix van short-tail (algemene term) en long-tail (meer specifieke term) zoekwoorden vormen. Ook hier: geen onnodige herhaling van woorden die al in de titel of categorie zitten (om breder bereik te krijgen). Het systeem zal tags die te veel overlappen of dupliceren markeren en eventueel vervangen. Er is ook validatie dat tags ASCII-only en comma-separated als string terugkomen.
Beschrijvingregels (description_rules.txt): De beschrijving moet in goede, leesbare volzinnen zijn maar toch geformatteerd als blokken (meer hieronder). Geen gebruik van Markdown of HTML; in plaats daarvan platte tekst met evt. opsommingstekens. ASCII-only, dus ook hier geen gekke symbolen of emoticons. Geen pure marketingtaal of overdreven superlatieven â€“ de toon moet klantgericht informerend zijn, niet schreeuwerig verkoop. Wel gewenst: een rijke beschrijvende stijl die de waarde en context van het product overbrengt (verhalend, emotie, toepassing). Daarnaast moet de beschrijving compleet zijn: idealiter behandelt hij materialen, personalisatie-opties, verzendinformatie, en het gebruik of de gelegenheid van het product. Veel hiervan is al door de structuur van de prompt afgedwongen (zie volgende sectie), maar de rules file herbevestigt dit.
Cascade gebruikt deze veldspecifieke regels op twee manieren:
Bij pre-validation van AI output: zodra de AI JSON terugkomt, controleert een functie validatePromptFields() of alle rules per veld zijn nageleefd. Zo niet, kan Cascade het veld strippen of aanpassen. Voorbeeld: een tag met hoofdletters wordt naar lowercase geconverteerd, een titel van 145 tekens wordt mogelijk ingekort of er volgt een regeneratie.
Bij promptinjectie: bepaalde cruciale regels worden al in de prompt zelf genoemd om de AI te sturen. Bv. de titelprompt vermeldt â€œmax 140 tekensâ€ expliciet, de tagprompt zegt â€œoutput 13 comma-separated lowercase tagsâ€. Zo is de AI-uitvoer meestal correct by design, en de validator hoeft minder in te grijpen.
Overige bestanden
Classificatie Prompt â€“ classifier_prompt.txt: Dit is een prompt die bedoeld was om op basis van ruwe tekst alle relevante velden te laten invullen (focus_keyword, product_type, audience, etc.). In de huidige flow wordt classificatie deels door gespecialiseerde functies en eventueel een beeldmodel gedaan, waardoor classifier_prompt.txt mogelijk niet actief gebruikt wordt. Er is discussie om deze te herzien of te verwijderen als hij niet meer nodig is. Voor nu is het goed dat een agent weet dat dit bestand bestaat, mocht text-only input classificatie ooit weer puur via GPT lopen. Het bevat instructies voor de AI om een JSON met alle velden te geven op basis van een beschrijving, als een soort Ã©Ã©n-staps listing generator. Dit project heeft echter gemerkt dat een meerlaagse aanpak robuuster is (eerst classificeren, dan per veld genereren). Dus zie dit bestand als legacy/back-up.
Naming conventie â€“ namingconventie_etsy_ai_hacker.txt: Hierin is vastgelegd hoe bestanden, logs en versies benoemd moeten worden, om consistentie te bewaren. Belangrijk voor een AI-agent:
Bestandsnamen: gebruik altijd onderkast en underscores, en voeg context + versie toe, bv. prompt_title_v2025-07-10.txt of backend_generateAiOutput_v1.2.js. Geen spaties of hoofdletters in bestandsnamen. Dit helpt versies bij te houden en ordening.
Log checkpoints: als in project_decisions_and_logs.md een nieuwe sectie wordt toegevoegd, formaat zoals â€œğŸ”– Checkpoint â€“ [Domein] [Onderwerp] â€“ YYYY-MM-DDâ€.
Subchat namen (optioneel): bij interne AI-discussies/logs een consistente naamstijl zoals â€œEtsy AI-Hacker â€“ [Domein] â€“ [specifiek onderwerp]â€, om verwarring te voorkomen.
Een nieuwe AI-developer moet deze conventies respecteren bij het toevoegen van bestanden of logsecties, zodat het project uniform blijft.
Projectoverzicht & Masterdocument: Het bestand Project_Overview.md (waar deze instructies op gebaseerd zijn) en het interne Masterdocument v2 bevatten de samenvatting van alle aspecten. Bij elke grote wijziging dient het Masterdocument geÃ¼pdatet te worden zodat het de realiteit weergeeft. In feite zou dit dossier kunnen dienen als basis voor Masterdocument v3, omdat het alle actuele richtlijnen omvat. Houd er rekening mee dat duplicatie tussen documenten voorkomen moet worden â€“ werk waar mogelijk vanuit Ã©Ã©n centrale bron of zorg dat updates doorgevoerd worden in alle relevante docs.
We hebben nu de voornaamste bronnen besproken. In de volgende sectie duiken we dieper in hoe elk veld precies gegenereerd en gevalideerd wordt, en welke prompts en regels daarbij komen kijken.
Promptarchitectuur per Veld (Titel, Tags, Beschrijving)
De listing wordt opgedeeld in velden die elk hun eigen AI-aanpak en validatie hebben. De drie primaire velden zijn: Titel, Tags en Beschrijving. Daarnaast zijn er secundaire velden zoals materialen, personalisatie-instructies, etc. Hier beschrijven we per veld de specifieke logica, gebaseerd op de huidige promptbestanden en regels.
Titel (Title)
De titel van de Etsy listing wordt gegenereerd via de prompttemplate title_prompt_v2.txt. De AI treedt op als SEO-titel specialist en krijgt instructies om een korte, krachtige en zoekgerichte titel te formuleren. Belangrijke aspecten:
Lengte en inhoud: De titel mag maximaal 140 tekens lang zijn. Idealiter blijft hij iets korter (Etsy toont ~50-60 karakters in zoekresultaten), maar de hard cap is 140. Dit wordt in de prompt expliciet vermeld zodat de AI die grens respecteert. Verder moet de titel begrijpelijk in Ã©Ã©n oogopslag zijn â€“ geen complete zinnen maar een opsomming van relevante woorden/frasen.
Hoofdzoekwoord vooraan: Het belangrijkste keyword of de productnaam hoort aan het begin te staan (binnen de eerste ~5 woorden). Bijvoorbeeld: â€œCustom Zodiac Sign Shirt â€“ Minimalist Astrology T-Shirtâ€¦â€. Hier is Zodiac Sign Shirt het focus keyword en staat dat meteen vooraan. Cascade zorgt dat het veld focus_keyword altijd gevuld is en plaatst dit doorgaans aan het begin bij contextinjectie.
Stijl en tone: De titelstijl is direct en search-driven. Dat wil zeggen, het is vooral gericht op wat een koper intikt als zoekopdracht, gecombineerd met een aantrekkelijke haak. In tegenstelling tot de beschrijving bevat de titel meestal geen emotioneel verhalende elementen (uitzondering: een kleine gift angle aan het eind kan, zoals â€œâ€¦ Giftâ€ indien gift mode). De tone_of_voice voor titels is neutraal commercieel en niet schreeuwerig.
Specifieke verboden in titel:
Geen woord volledig in hoofdletters (bijv. â€œSALEâ€ of â€œWOWâ€) â€“ Etsy staat hooguit Ã©Ã©n acroniem toe. Onze regel is max 1 woord in caps, de rest Gematigd of kleine letters.
Geen emojiâ€™s of rare symbolen.
Vermijd herhaling van hetzelfde woord (bv. â€œhandmade handmade braceletâ€).
Niet meerdere producten combineren: focus op Ã©Ã©n productsoort per listing. Dus geen titel als â€œBoho Necklace and Bracelet Setâ€ tenzij het werkelijk een set is â€“ maar dan liever splitsen in afzonderlijke listings.
Structuur van titel: Vaak gebruikt de AI deelonderscheid met scheidingstekens (en dash â€œâ€“â€ of verticale streep â€œ|â€). Een aanbevolen structuur is:
Hoofdproduct + Kenmerk â€“ Stijl/Variant â€“ Eventueel Merk/Model â€“ Gift hint.
Bijvoorbeeld: â€œCustom Zodiac Sign Shirt â€“ Minimalist Astrology T-Shirt â€“ Comfort Colors 1717 â€“ Aesthetic Star Sign Giftâ€ (zoals in voorbeeldlisting). Hier zien we: product (Shirt) + custom aspect (Zodiac Sign) + style (Minimalist Astrology) + merk/model (Comfort Colors 1717) + gift angle (Star Sign Gift). De AI wordt aangemoedigd zoâ€™n structuur te volgen indien data voorhanden is.
Contextinjectie: In de titelprompt worden verschillende contextvelden meegegeven om de AI te helpen:
focus_keyword (hoofdkeyword),
product_type (wat is het voorwerp),
style_trend (stijl of trendwoord, bv. â€œbohoâ€, â€œminimalistâ€ als dat relevant is),
gift_emotion (indien gift mode actief en specifiek emotieprofiel),
tone_profile of relevante toonindicatie (bij titel beperkt, meestal neutraal gehouden).
receiver_profile zou bijvoorbeeld kunnen leiden tot een hint (â€œfor Momâ€ in title als dat zou mogen, maar meestal doen we dat niet direct in titel om breed te houden).
De prompt kan er zo uitzien (pseudo-voorbeeld in codeblok):
Schrijf een pakkende Etsy-titel voor het volgende product.
- Product: {product_type} 
- Uniek kenmerk/keyword: {focus_keyword}
- Stijl/trend: {style_trend}
- Doelgroep/gelegenheid: {receiver_profile} {gift_emotion}
Regels: Max 140 tekens, geen emoji, geen alles caps, keyword vooraan, tone: {tone_profile}.
Output als JSON: {"title": "..."}
Bovenstaand is illustratief; de echte prompt is uitgebreider en nauwkeurig geformuleerd.
Validatie: Na AI-generatie checkt het systeem of de titel aan alle eisen voldoet (via validateTitle() of vergelijkbaar in code):
Lengte â‰¤ 140? Zo nee, AI fout of trimmen en loggen.
Bevat hij ongeldige tekens? Dan filteren/vervangen.
Zit het focus_keyword erin en liefst vooraan? (Dit laatste wordt niet automatisch gecorrigeerd, maar de prompt dwingt het al af. Als het niet gebeurde, zou dat een reden zijn voor hergeneratie.)
Unieke check: als de AI per abuis een tag achtige opsomming maakt met 2x hetzelfde woord, kan Cascade dat opmerken en eventueel een woord schrappen.
Samengevat: de titel moet SEO-geoptimaliseerd en buyer-relevant zijn, zonder de Etsy-richtlijnen te overtreden. Het is het visitekaartje van de listing. In latere ontwikkeling (zie taken) willen we de titel nog beter laten aansluiten op gift mode en merk/style. Momenteel merkt de analyse op dat ons systeem nog niet automatisch merk- of trendnamen in de titel plaatst â€“ dat is een verbeterpunt (Prompt Layer v2.6 zal dit oppakken). Maar de basis staat: heldere, schone titels.
Tags
De tags worden gegeneerd via tag_prompt_v2.txt. De AI handelt hier als Etsy SEO-tag expert. Doel is een lijst van precies 13 relevante zoektermen (tags) voor het product. Belangrijke punten:
Formaat: De output is een enkele string of array met 13 comma-separated tags, geen meer, geen minder. Cascade let hier streng op: als het er niet 13 zijn, is de output ongeldig. De prompt hamert erop: â€œProvide exactly thirteen (13) tags, separated by commas.â€
Lengte en tekens: Elke individuele tag mag hoogstens 20 karakters lang zijn. Geen hoofdletters, alles in lowercase. Geen speciale tekens of meervoudige woordgroepen met vreemde leestekens. Indien de AI toch een tag â€œCustom-Shirtâ€ met koppelteken zou geven, zou de validator dat bijvoorbeeld vervangen door een spatie (â€œcustom shirtâ€), want Etsy staat wel spaties toe maar rekent het als Ã©Ã©n tag zolang comma separated.
Uniekheid & diversiteit: De 13 tags moeten elkaar inhoudelijk aanvullen, niet herhalen. Bijvoorbeeld als de titel â€œzodiac shirt giftâ€ bevat, kunnen tags wel â€œzodiac shirtâ€ en â€œzodiac giftâ€ afzonderlijk zijn, maar we vermijden duplicaat: geen twee tags die precies hetzelfde zeggen (dus niet zowel â€œzodiac shirtâ€ als â€œshirt zodiacâ€ â€“ dat tweede zou redundant zijn). Ook geen synoniemen dubbelop (niet zowel â€œastrology shirtâ€ en â€œhoroscope shirtâ€ als tags als die hetzelfde publiek trekken â€“ maar hier zou men kunnen stellen dat ze net anders zijn; finaal oordeel bij AI). Het systeem heeft (in toekomstige uitbreiding) een semantische duplicaat-check nodig. Momenteel baseert het zich op stringgelijkenis en eenvoudige lijstjes van stopwoorden.
SEO-strategie: In de tags wil je zowel breed georiÃ«nteerde termen als specifieke niches:
Short-tail: algemene categorieÃ«n (bv. â€œzodiac shirtâ€, â€œgraphic teeâ€, â€œastrology giftâ€).
Long-tail: meer specifieke frases die minder concurrentie hebben (bv. â€œaries zodiac tshirtâ€, â€œpersonalized horoscope teeâ€).
Ons voorbeeld had tags als â€œy2k clothing, zodiac gift, astrology t-shirt, Scorpio Cancer (combo tag?), custom zodiac teeâ€¦â€ en zo verder. Dit is een mix van trend (y2k), thema (zodiac/astrology), concrete variant (aries tshirt, Virgo tshirt), en doelgroeptaal (gift, custom). De AI moet dus trendwoorden, productwoorden en doelgroepwoorden combineren.
Contextinjectie: De tag-prompt krijgt van Cascade mee:
focus_keyword (zo mogelijk verwerkt in Ã©Ã©n tag exact).
product_type (bijv. â€œt-shirtâ€ zodat er zeker â€œshirtâ€ of â€œteeâ€ in tags zit).
style_trend of relevante stijl (bv. â€œy2kâ€ als dat actueel is voor het product).
seasonal_context indien van toepassing (bv. â€œChristmasâ€ â†’ tag â€œchristmas giftâ€ waarschijnlijk).
gift_rules influence: Bij gift mode voegt Cascade cadeau-termen toe; de prompt weet dat hij bij gift_mode bijvoorbeeld â€œgift for momâ€ of â€œbridesmaid giftâ€ als tag moet overwegen.
receiver_profile: Als de doelgroep specifiek is, kan een tag daar naar verwijzen (bv. â€œgift for gamersâ€, â€œgift for grandpaâ€). Dit moet echter kort blijven.
In codevorm zou een promptfragment kunnen zijn:
Genereer 13 relevante tags (zoekwoorden) voor dit product:
- Product: {product_type}
- Hoofdthema: {focus_keyword}
- Stijl/trend: {style_trend}
- Gelegenheid: {seasonal_context}
- Doelgroep: {receiver_profile}
Regels: alleen kleine letters, max 20 karakters per tag, scheid met komma's.
En eventueel extra hint: â€œInclude gift-related terms if relevant (gift_mode = {gift_mode}).â€ In de daadwerkelijke prompt is gift_mode al een boole, dus de aanwezigheid van gift_emotion/gift_rules in context stuurt dat impliciet.
Geen overlap met categorie: Een Etsy-tip is om geen tags te verspillen aan woorden die al in de categorie of titel staan. Hoewel onze AI dat probeert, is het niet waterdicht. Bijvoorbeeld als de categorie â€œClothing > Tops > T-Shirtsâ€ is, hoef je â€œshirtâ€ niet per se als losse tag. Onze regels zeggen â€œvermijd overlap met title of categoryâ€. Dit vereist in de toekomst dat Cascade weet welke categorie gekozen wordt om duplicaten te skippen. Momenteel is dat nog niet volledig geÃ¯mplementeerd, maar de AI is wel geÃ¯nstrueerd algemeen relevante maar niet redundante tags te kiezen.
Validatie & correctie: Cascade telt de tags en splitst op commaâ€™s om te verifiÃ«ren dat het er 13 zijn. Bij minder zal dit als fout gelden en mogelijk een tags_fallback_prompt aanspreken. Bij meer worden de extraâ€™s genegeerd of opnieuw geprobeerd. Length van elke tag wordt gecheckt; >20 chars kan Cascade knippen of een lange phrase splitsen. Hoofdletters transformeert het naar lowercase automatisch. Duplicaten worden eruit gefilterd: als AI per ongeluk â€œzodiac shirtâ€ twee keer output (kan gebeuren bij model-twijfel), zal Cascade er Ã©Ã©n verwijderen en dan om een nieuwe tag vragen of zelf een variatie bedenken. Ook ongewenste karakters (bijv. â€œ100% cottonâ€ als tag â€“ % teken is niet a-z,0-9 â€“ dat procentteken zou eruit gefilterd worden, tag wordt â€œ100 cottonâ€ wat vreemd is; zulke gevallen idealiter vermijden in prompt zelf).
Toekomstige verbetering: De analyse liet zien dat momenteel het systeem nog geen onderscheid maakt tussen bepaalde trendtags (zoals â€œy2kâ€, â€œcottagecoreâ€) tenzij in de input. Ook gift-vocabulaire (â€œfor herâ€, â€œfor best friendâ€) zou slimmer kunnen â€“ dat is onderdeel van de uitbreidingen (Semantic Tag Generator). Ook is integratie met eRank of een vergelijkbare database genoemd, om tag-suggesties te valideren op zoekvolume. Voor nu genereert de AI op basis van zijn training en de contextlogica een goede set, die door de regels behoorlijk in het gareel gehouden wordt.
Beschrijving
De beschrijving wordt gemaakt met description_prompt_v2.txt. Hier profileert de AI zich als creative copywriter met gevoel voor kooppsychologie. De beschrijving is doorgaans een wat langer stuk tekst, opgedeeld in logische blokken. Belangrijke aspecten:
Structuur in blokken: De prompt is zo opgezet dat de AI de output indeelt in secties, vaak voorafgegaan door een soort kopje (in plain text). De huidige versie hanteert bijvoorbeeld de volgende opzet:
Overview: een korte samenvattende intro van het product (wat is het, hoofd USPâ€™s).
Features: opsomming van specifieke producteigenschappen (materiaal, afmetingen, kwaliteit).
Personalization Guide: (optioneel, als personalisatie van toepassing) uitleg wat de koper kan personaliseren en hoe (hier zou ook een voorbeeld kunnen staan).
Care Instructions: eventuele wasinstructies of verzorgtips als relevant.
Available Sizes: (optioneel, bij kleding/beschikbare varianten).
Shipping and Processing: informatie over productietijd, verzendtijden, etc.
Important Notes / Disclaimer: (niet expliciet genoemd hierboven, maar ons voorbeeld had â€œImportant Notesâ€).
Use case / Perfect for: Soms voegt de AI een stukje toe â€œPerfect for: â€¦â€ met opsomming van doelgroepen/gelegenheden (bijv. â€œâœ” Birthday gift for mom, âœ” Graduation present,â€ etc.), zeker als gift_mode true is.
Call to action/Closing line: Soms eindigt de AI met een vriendelijke aansporing (â€œOrder now to delight someone special!â€) â€“ dit houden we minimaal en Etsy-conform (geen directe imperatieven die als schreeuwerig worden gezien).
De prompt bevat mogelijk placeholders of expliciete sectietitels â€œ::: Overview :::â€ enz. om de AI te dwingen die structuur te volgen. In output zie je dat terug als bijvoorbeeld een woord in caps gevolgd door een dubbele punt of een emoji-achtig opsommingsteken (sommige AIâ€™s gebruiken graag emoji als âœ” of ğŸŒŸ bij opsommingen; we laten enkel ASCII toe, maar een sterretje * of vinkje kan weleens slippen in output â€“ dat is ASCII dus okÃ©).
Inhoudelijke eisen:
De beschrijving moet rijk en informatief zijn: alle belangrijke productdetails moeten erin, plus context die de koper helpt het product te visualiseren en te willen hebben.
Conversiegericht schrijven: Gebruik van storytelling en emotie is gewenst (vooral bij gifts: beschrijf bv. de reactie van de ontvanger of het sentiment erachter). Tegelijk moet nuttige info niet ontbreken: materiaal, formaat, maakproces als relevant, hoe personaliseren, verzending, etc. Ons voorbeeld omvatte al die elementen en meer (maatvoering, hoe te bestellen stap-voor-stap, etc.).
Tone-of-voice: Deze is koper-georiÃ«nteerd en afgestemd op de doelgroep en gelegenheid. Bijvoorbeeld: joviaal en trendy voor jongere publiek, of juist geruststellend en professioneel voor een hoogwaardig item. De tone_profile uit de context (zie tone_style eerder) wordt hier het meest duidelijk toegepast, meer dan in titel of tags. Als gift_mode aan is, is de toon ook empathisch richting de gever/ontvanger relatie.
Geen overtredingen: Niet te technisch (tenzij doel is tech-publiek), geen interne termen (â€œSKU, listing, etc.â€ vermijden), geen subjectieve opschepperij (â€œbest quality on Etsy!â€ is uit den boze). En uiteraard ASCII-only, geen vreemde tekens of emoji. Ook liever geen emojis als bullet (al is een ascii bullet - prima; AI kan soms â€œğŸ’–â€ als bullet willen doen, maar dat mag niet â€“ Cascade zou zoâ€™n karakter eruit filteren).
Contextinjectie: De beschrijvingsprompt krijgt veel context mee, omdat dit veld het meest situationeel is. Meegegeven variabelen:
gift_mode (bool) â€“ beÃ¯nvloedt of cadeautaal gebruikt moet worden.
gift_emotion â€“ voor de emotionele insteek (sentimental/fun/elegant, etc.).
tone_style / tone_profile â€“ specifieke toon setting voor deze doelgroep.
audience_profile â€“ samenvatting van doelgroep (bv. â€œGen Z fashion loversâ€).
seasonal_context â€“ indien b.v. kerst, zal de prompt dat weten en kan zeggen â€œperfect for the holiday seasonâ€.
product_type, material â€“ zodat materiaal benoemd kan worden (â€œmade of 100% cotton, OEKO-TEX certified, â€¦â€).
personalization â€“ of het product personaliseerbaar is; zo ja, prompt vraagt AI om dat stuk toe te voegen (Personalization Guide).
targeting_options â€“ evt. speciale instructies als een bepaalde hoek op moet (nog in ontwikkeling, kan bijv. een specifieke niche push zijn).
In de praktijk wordt ook hier weer uit de rulefiles geput: gift_rules voegt richtlijnen toe (â€œverwerk waarom dit cadeau goed pastâ€), tone_style voegt schrijfstijlrichtlijnen toe (â€œgebruik jargon X of Y nietâ€), etsy_rules voegt toe dat er geen verboden claims in mogen, etc. Cascade assembleert deze â€œcontextblokkenâ€ tot Ã©Ã©n geheel dat voor de prompt gebruikt wordt.
Semantisch gedrag: De beschrijving moet geen herhaling bevatten die niet nodig is. Elke zin of sectie moet iets nieuws toevoegen. De AI wordt gevraagd te verkopen zonder over-te-verkopen: dus nadruk op waarom het product waardevol is voor de koper (â€œheavyweight cotton for a premium feelâ€) en waarom het bij de doelgroep past (â€œperfect for astrology lovers who appreciate minimalist styleâ€). Ook kan de AI subtiele overtuigingstechnieken gebruiken, zoals schaarste insinueren (â€œmade to order â€“ get yours now while availableâ€) of social proof (â€œloved by many horoscope enthusiastsâ€) â€“ mits waarheidsgetrouw en niet in strijd met Etsy-beleid.
Voorbeeld structuur uit voorbeeldlisting:
Begon met een emotieve hook: â€œExpress your cosmic energy with this Custom Zodiac Sign Shirtâ€¦ premium Comfort Colors 1717 teeâ€¦ perfect for everyday wear.â€ â‡’ Dit is Overview.
Dan een sectie met emoji-achtige bullets (ğŸŒŸ) â€œPersonalization Options: â€¦â€ en daarna een lijst van wat je kunt kiezen (sign, shirt color, design color). â‡’ Dit is Personalization Guide.
Daarna â€œâœ¨ Product Features:â€ met een lijst van material/fabric qualiteiten (100% cotton, vintage feel, relaxed fit, etc.). â‡’ Features.
Dan â€œğŸ Perfect for:â€ met lijst â€œAstrology lovers, Birthday gifts, Aesthetic fashion lovers, â€¦â€. â‡’ Use case / targeting.
Dan â€œğŸ“ Size Guide:â€ met info over maten. â‡’ Sizes.
Dan â€œğŸ“¦ Processing & Shipping:â€ met productie- en levertijden. â‡’ Shipping.
Dan â€œğŸ’¡ How to Order:â€ met stapsgewijze instructie hoe in de Etsy UI te bestellen/personalizeren. â‡’ Dit was extra, maar zeer nuttig voor complexe products (onze prompt dekt dit nog niet expliciet, een verbeterpunt).
Dan â€œğŸ›‘ Important Notes:â€ met disclaimers (kleurvariatie, geen retour op custom, check adres, etc.). â‡’ Notes.
Afsluiting met een marketing-zin die toch beschrijvend is: â€œDesigned for astrology loversâ€¦ align with your celestial energy!â€ â‡’ Closing line appeal.
Al deze onderdelen willen we uiteindelijk modulair kunnen genereren. Onze huidige prompt v2.0 genereert sommige daarvan automatisch (Overview, Features, eventueel een stukje Personalization, Shipping), maar niet allemaal consequent. Het modular description builder plan (zie taken) beoogt dit te verbeteren, zodat de AI echt elke relevante sectie vult of bewust weglaat indien niet relevant (optionele secties).
Validatie: Na generation splitst Cascade de beschrijving in regels/secties en checkt:
Zijn er verboden woorden of zinnen? (Bv. â€œ100% satisfaction guaranteedâ€ zou eruit gefilterd moeten worden).
ASCII-check: soms sluipt er toch een vreemd teken in; die wordt dan verwijderd of vervangen.
Lengte is niet echt gelimiteerd door Etsy (beschrijving kan vrij lang), maar voor performance willen we het onder paar duizend tekens houden; als AI onnodig novel-esque teksten zou schrijven, kan dat afgekapt worden â€“ dit is zelden voorgekomen omdat prompt duidelijk is dat beknoptheid gewenst is.
Bullet gebruik: Etsy staat geen markdown toe, maar wel opsommingen met - of enumerate. We zien in voorbeeld dat AI soms een * of emoji gebruikt als bullet. Onze ASCII regel blokkeert emoji bullets, maar een sterretje * is toegestaan en komt voor. Dat is prima zolang consistent.
Kort gezegd: de beschrijving is het meest uitgebreide veld met de meeste intelligentie erin: het verkoopt het product. Ons systeem zorgt dat alle must-have info erin zit (materials, shipping, etc.) en dat de nice-to-have emotie ook wordt toegevoegd. De huidige versie doet dit al goed, maar mist nog wat verfijning in modulariteit, tone variaties en personalisatievoorbeelden â€“ deze staan gepland om te ontwikkelen.
Personalisatie & extra velden
Personalization box: Etsy heeft vaak een veld â€œAdd your personalizationâ€ waar kopers hun naam, tekst of keuze kunnen invullen voor maatwerkproducten. In onze output JSON wordt dit soms als veld personalization of onderdeel van description opgenomen. Ons systeem ondersteunt personalisatie technisch (toggle in UI, en AI kan bijvoorbeeld iets genereren als er om gevraagd wordt), maar huidige AI genereert nog geen standaard instructietekst voor personalisatie. Dat is een gat dat we gaan vullen (zie PersonalizationBox Composer in de takenlijst). Het idee is dat de AI bij een personaliseerbaar product een stukje tekst produceert als: â€œEnter your [detail] in the personalization box. E.g.: â€˜Name: Johnâ€™. Note: custom orders are final sale.â€. In het voorbeeldlisting zag je een perfect stukje instructie + voorbeeld + policy in de personalization field tekst. Ons doel is dat de AI dit autonoom doet aan de hand van product_type (bv. als het een T-shirt met eigen tekst is, dat hij weet dat hij om tekst/naam moet vragen). Momenteel ontbreekt hier logica voor; personalisatievelden worden nu vaak leeg gelaten of zeer generiek. Tot implementatie van PersonalizationBox Composer is dit een aandachtspunt: geen personalisatie-instructie genereren tenzij zeker van zaak, om fouten te vermijden. Materials: Het systeem kan een veld materials of materiaal-lijst genereren op basis van input of classifier. In het voorbeeld is een mooie combinatie gegeven: "cotton, 100 percent Ring Spun Cotton, Garment Dyed, OEKO TEX Certified, Ethically Sourced, No Side Seams". Dit lijstje bevat zowel het basismateriaal (cotton), detail over katoenkwaliteit (100% ring-spun, garment-dyed), een certificering (OEKO-TEX), ethische claim (ethically sourced) en constructiekenmerk (no side seams). Onze AI-classifier kan sommige hiervan afleiden (uit beschrijving of afbeelding), maar niet alles automatisch. In de toekomst willen we dat de AI patronen herkent zoals â€œOEKO-TEXâ€ of â€œvegan leatherâ€ en die opneemt. Voor nu, als material in input aanwezig is, zal het in output komen; anders vult de AI wellicht iets standaards in (â€œcotton, polyesterâ€) als gok. Check dit altijd en laat Cascade geen onjuiste materiaalclaims doen. Beter leeg dan fout. Dit valt onder validatie: onzekere materialen liever niet tonen. In logs is benoemd dat materialen semantisch ordenen (zoals voorbeeld deed: eerst stof, dan eigenschappen) een gewenst iets is wat we nog moeten inbouwen. Overige velden (Category, Attributes, etc.): Het systeem inferereert mogelijk een Etsy-categorie of bepaalde attributen (kleur, stijl) uit de input, maar deze worden momenteel niet via AI gegenereerd â€“ meestal haalt de frontend of classifier dat uit een vaste mapping of laat de gebruiker het kiezen. Dit dossier focust op de AI-generatie van teksten (title, tags, description). Zaken als categorie-ID of attributen zouden in de output JSON kunnen staan als category of attributes velden, maar die worden elders gevuld en vallen buiten de AIâ€™s schrijfopdracht. Wel zorgen we dat tags en beschrijving in lijn zijn met die categorie/attributen (bijv. als category â€œJewelry â€“ Ringsâ€ is, dat AI niet â€œnecklaceâ€ zegt ergens). Met deze velddetails in het achterhoofd, hebben we een goed beeld van de huidige mogelijkheden en beperkingen. De volgende stap is te kijken naar wat er nog gerealiseerd moet worden om het project naar het gewenste niveau (zoals de voorbeeldlisting) te tillen.
Vervolgstappen (Openstaande Taken)
Uit de analyse (zie sectie ### Analyze en stappen in Project_Overview.md) is gebleken dat hoewel de basis staat, er nog cruciale modules ontbreken of verbetering behoeven om de AI-output echt op voorbeeldniveau te brengen. Hieronder de openstaande taken. Elke voltooide stap moet door de AI-agent worden afgevinkt in Project_Overview.md (bijvoorbeeld door [x] voor het item te zetten of de statusiconen /âœ… bij te werken). De huidige status is aangegeven met een checkbox:
- [x] retry_reason fallback (14-07-2025): Backend voegt nu automatisch retry_reason toe bij te korte input. Zie project_decisions_and_logs.md en generateFromDumpCore.js.
- [x] Logging-instructies (14-07-2025): Alle wijzigingen worden nu verplicht gelogd in project_decisions_and_logs.md met vaste structuur. Zie logs 14/7.
- [x] Backend catch logic (14-07-2025): Alle parsefouten en AI-outputproblemen worden nu correct afgevangen en gelogd. Zie logs 14/7.
- [x] Promptversie v3.2.2 (15-07-2025): Classifier_prompt is geÃ¼pdatet met aangescherpte sparse input strategie. Zie logs 15/7.
 Prompt Layer v2.6 â€“ Upgrade van titel-, tag- en beschrijvingsprompts: Nieuwe promptversies ontwikkelen die de geconstateerde hiaten dichten. Concreet: merk- en stijlvermeldingen integreren in de titel (bv. modelnummers zoals â€œComfort Colors 1717â€ moeten de AI nu ook kunnen noemen), esthetische trendwoorden toevoegen (zoals â€œminimalist, aestheticâ€) als relevant, en expliciete gift-framing aan het eind van titels in Gift Mode. Voor tags: zorgen dat trendtermen (bv. â€œy2kâ€) en gift-termen (â€œfor wifeâ€, â€œbridesmaid giftâ€) systematisch meegenomen worden en semantisch gecontroleerd (dupliceer geen betekenis). Voor beschrijving: prompt zo aanpassen dat hij modulair alle blokken bevat (Overview, Features, Personalization, How to Order, etc. â€“ zie ook taak Modular Description Builder) en dat tone-of-voice flexibeler schakelt (zie Tone & Style Switcher). Deze v2.6 prompts zullen waarschijnlijk title_prompt_v2.6.txt, tag_prompt_v2.6.txt, description_prompt_v2.6.txt heten (of de versie in de meta aangeven). Actie: nieuwe promptbestanden opstellen, testen op outputkwaliteit, versie loggen, oude promptfiles versie-archiveren indien nodig.
 ğŸ§  Persona Gift Engine â€“ Een module die de koper-ontvanger relatie en persona verder uitdiept. Waar de huidige classifier beperkte info geeft (alleen een boolean gift_mode en wellicht â€œbuyer_vs_receiverâ€), moet de Gift Engine AI of regels gebruiken om te bepalen: Wat voor type gever en ontvanger is dit? Denk aan profielen: â€œvriend â†’ beste vriend(in)â€, â€œouder â†’ volwassen kindâ€, â€œpartner â†’ verloofdeâ€, etc. en dit koppelen aan schrijfstijl. Uiteindelijk wil je dat de beschrijving en titel deze relatie voelen. Deze engine kan deels rule-based (lookup op woorden als â€œmom, friendâ€ in input) en deels AI (laten invullen bij onduidelijkheid). Doel: Cascade krijgt extra contextvariabelen giver_persona en receiver_persona of een samengestelde relationship beschrijving, plus eventueel een gift_reason/occasion. De gift_rules kunnen hiermee verder verfijnd worden (bijv. speciale zinnen als het voor een partner is vs voor een collega). Actie: Ontwikkel deze logica in de classificatie laag (assignFieldsFromDump of een nieuwe module), test of de promptoutput merkbaar beter personalizeert op relatie. Log beslissingen en voeg documentatie van nieuwe velden toe in masterdocument.
 ğŸ§¾ Personalization Box Composer â€“ Functionaliteit om automatisch de personalisatie-instructietekst te genereren. Zodra personalization = true (product heeft personalisatieopties), moet de AI-agent een netjes geformuleerd tekstje maken dat in Etsyâ€™s Add your personalization-veld kan staan. Dit omvat: wat in te vullen (naam, datum, keuze etc.), voorbeeld (bv. â€œExample: John - Blueâ€), en beleid/hint (zoals â€œLet op: check spelling, maatwerk kan niet geretourneerdâ€). In het voorbeeldlisting is dit perfect gedemonstreerd. We willen deze logica generaliseren: wellicht aan de hand van product_type (b.v. als het een shirt met custom tekst is, vraag om gewenste tekst + kleur), of via speciale tags in de input (â€œpersonalization_detailsâ€: â€œzodiac sign & colorâ€). Actie: Uitwerken van een prompt of regels die dit tekstje genereren. Mogelijk kan dit als onderdeel van de description_prompt of als aparte functie die vooraf of nadien wordt aangeroepen. In elk geval na implementatie flink testen op verschillende producten (bv. gravure sieraden vs. shirt met naam) om te zien of het zinnige instructies geeft. Logging in project_decisions_and_logs.md met redenatie achter gekozen aanpak.
 ğŸ“š Modular Description Builder â€“ Upgrade van de beschrijvingsprompt (deels overlap met Prompt Layer v2.6) zodat de beschrijving uit afzonderlijke blokken wordt opgebouwd in plaats van Ã©Ã©n grote lap tekst. De huidige prompt geeft wel secties, maar we willen dit formeler: misschien de AI elk blok apart laten genereren, of in de prompt strengere sjabloon met alle sectietitels (al is dat al deels). Belangrijk is ook per blok conditionaliteit: bv. alleen een â€œCare Instructionsâ€ sectie genereren als het product verzorging vereist (kleding wel, digitale download niet). Alleen â€œSize Guideâ€ als relevant. Dit kan door context mee te geven (flags voor each section) of door achteraf bepaalde blokken te strippen als ze leeg/onzin zijn. Actie: Bepaal aanpak (Ã©Ã©n prompt met alles vs. meerdere kleinere prompts sequentieel voor elk blok). Implementeer dat de beschrijving altijd de volgorde Overview, Features, â€¦, Notes volgt zoals gewenst. Test op producten met/zonder personalisatie, met/zonder kledingmaten, etc., om te zien of de conditionals werken. Deze modulariteit verhoogt de betrouwbaarheid dat niets gemist wordt. Documenteer in Masterdocument nieuwe secties of flags. Markeer taak als voltooid in Project_Overview.md zodra de beschrijving consistent alle benodigde onderdelen bevat.
 ğŸ·ï¸ Semantic Tag Generator â€“ Verdere verbetering van de tag-generatie met semantische kennis en trendinzichten. Dit heeft meerdere subdoelen:
Integratie van trend- en niche-termen: Zorg dat de AI up-to-date populaire termen kent (bv. â€œcottagecoreâ€ interieur, â€œgoblin coreâ€, etc.) en toepast als passend. Dit kan via een onderhoudslijst of via AIâ€™s eigen kennis, maar wellicht aansturen door bij context aan gift_mode ook een trend_category mee te geven indien van toepassing.
{{ ... }}
Prioriteren op zoekvolume: eventueel integreren van externe data (eRank CSVâ€™s?) om AI te laten weten welke tags meer gezocht worden. Dit is complex en misschien buiten scope van direct AI-agent; kan ook later via een recommender. Voor nu kan de agent in ideeÃ«nfase noteren.
Actie: Focus op eerste twee: verrijk de tag_prompt of achteraf-filters zodat trend/gift termen erin komen en semantische doublures eruit. Test met scenarioâ€™s: product met thema dat meerdere benamingen heeft (bv. â€œsofa / couch / loveseatâ€) â€“ zorgt de generator dat hij er maar Ã©Ã©n kiest en aanvult met andere unieke termen? Test gift: input â€œgift for wifeâ€ zou moeten leiden tot tag â€œgift for wifeâ€ en niet nog een keertje â€œwife giftâ€ apart. Na implementatie, resultaten loggen, vergelijken met eerdere output (kwaliteit toe- of afgenomen?). Vastleggen in logboek.
 ğŸ’¬ Tone & Style Switcher â€“ Een mechanisme om de toon en schrijfstijl dynamisch te wisselen afhankelijk van de context, met name om de emotie en commerciÃ«le insteek scherper te maken. Hoewel we tone_profile al hebben, is geconstateerd dat de AI nog niet al te creatief varieert (bijv. â€œromantic, quirky, minimal, luxuryâ€ varianten voor dezelfde listing). Deze taak houdt in:
De tone_style/tone_profile selectie algoritme verder verfijnen. Misschien een aparte toneSelector() functie die meer weegt dan nu. Bijvoorbeeld: bij â€œbruiloft cadeau aanstaande bruidâ€ zou hij niet de default â€œwarmâ€ toon maar misschien â€œelegant/sentimentalâ€ moeten kiezen.
Style variations: de prompt kan wellicht instructies krijgen als â€œAls tone_profile = playful-youth, gebruik wat slang of uitroep (OMG, yay); als minimal-elegant, hou taal verfijnd en vermijd uitroepenâ€. Dergelijke instructies deels al in tone_style.txt, maar moet strikt doorgevoerd worden in output.
Consistente doorvoering: al geÃ¯mplementeerd is dat prompt_router dezelfde tone doorgeeft aan title/tags/desc. Check of dat werkt na updates. Als we tone switch agressiever maken, moeten we zeker zijn dat alle velden het toepassen.
Actie: Test enkele scenarioâ€™s waar toon cruciaal is: bv. een stoer gadget voor tieners (zou speels en modern moeten klinken) vs. een duur sieraad voor oma (warm, nostalgisch). Tune de regels in tone_style_v2.5 of de selectie in code zodat het effect duidelijk is. Zorg dat de agent/AI in geval van twijfel liever een neutralere toon kiest dan een foutieve (bv. beter safe than sorry, want toon overschakelen kan user altijd zelf). Log de aanpassingen. Markeer done wanneer de AI duidelijk verschillende tone_styles kan laten zien in tests op identieke input met verschillende doelgroep toggles.
 ğŸ§ª Gifting Intent Evaluator â€“ Een uitbreiding op de huidige gift_mode detectie: dit component moet automatisch herkennen wanneer de gebruiker een listing als cadeau-intentie heeft, en welke gelegenheid daarbij hoort. Momenteel wordt gift_mode geactiveerd via expliciete triggers (toggle, of als classifier bepaalde woorden oppikt). De evaluator zou:
Slimmere detectie doen in de inputtekst: zoekt naar woorden als â€œgift, present, for my, surprise, anniversary, birthdayâ€ en op basis daarvan gift_mode true en wellicht occasion = birthday instellen.
Seizoensgebonden: als de maand November is en het item is typisch cadeau (bv. â€œgiftâ€ in omschrijving), zou het occasion â€œChristmasâ€ kunnen suggereren. Misschien out-of-scope voor nu, maar noem het.
SDR integratie: in de SDR-classificatie kon een veld intentie of use_case zitten dat cadeaugebruik aanduidt. De evaluator moet dat verwerken.
In Gift Mode context horen we eigenlijk altijd te vragen: is dit voor de koper zelf of voor iemand anders? Als niet anders blijkt, aannemen dat buyer â‰  receiver (most gifts). Maar misschien input als â€œfor myselfâ€ vermelden.
Deze evaluator zit deels al in assignFieldsFromDump (zie criteria gift_mode automatisch aan), maar kan verfijnd worden. Actie: Review de huidige gift detectielogica, voeg regels toe voor randgevallen (bijv. als user niets zei over gift maar wel een occasion zoals â€œweddingâ€ â†’ toch gift_mode want wedding gifts). Ook de occasion extraction kan hier: bijv. detecteer woorden: birthday, Christmas, Valentine, Motherâ€™s Day etc., zet seasonal_context of een nieuw veld occasion daarop. Test met input: â€œI need a gift for my mom, she loves jewelry.â€ â†’ verwacht: gift_mode true, buyer_vs_receiver giver, receiver_profile maybe â€œmotherâ€, occasion perhaps â€œMotherâ€™s Dayâ€ als maand mei of context â€œmom birthdayâ€ als dat genoemd. Log any improvements. Dit versterkt alle andere onderdelen (prompt krijgt betere info).
Noot: Bovenstaande taken zijn gedeeltelijk afhankelijk van elkaar. Bijvoorbeeld de Prompt Layer v2.6 implementatie zal gebruikmaken van de Gift Engine en Tone Switcher resultaten. Het is verstandig ze in logische volgorde op te pakken: eerst de onderliggende detecties (Gift Intent Evaluator, Persona Gift Engine), dan de prompt-updates (v2.6, modular desc), en parallel daaraan de tag/tone verbeteringen. Uiteraard kunt u iteratief werken: een stukje engine, dan prompt, terug naar engine etc., zolang alles getest en gelogd wordt. Herinnering: werk stapsgewijs en testgericht. Na elke module implementeer je, voer je testcases uit (volgende sectie) en update je de documentatie en logs.
Testscenarioâ€™s en Validatie
Elke aanpassing moet worden gevolgd door grondige tests om te garanderen dat de output nog steeds aan alle eisen voldoet en dat nieuwe functionaliteit werkt. Het project hanteert een uitgebreide teststrategie:
Edge-case testset: Er is een lijst van ten minste 10 foutscenarioâ€™s gedefinieerd die de AI moet kunnen opvangen. Enkele voorbeelden:
Emoji in input: gebruiker typt bijv. â€œCute ğŸ˜Š necklace for best friendâ€. Verwacht: AI negeert/verwijdert de emoji, genereert valide output zonder rare placeholders. Test controleert dat er geen \ud83d (emoji code) in JSON verschijnt en dat beschrijving geen lege gaten heeft waar emoji stond.
Excess whitespace / newline dump: input als een gekopieerde Etsy listing met veel enters of HTML. CleanEtsyDump moet dit correct opschonen. Output mag geen HTML-artefacten bevatten (zoals <br> of &quot;).
Te weinig info: gebruiker geeft Ã©Ã©n woord â€œT-shirtâ€. AI moet toch iets zinnigs genereren: classifier vult zelf velden in (genre een default style, audience etc.) en output is algemeen maar plausibel. Test: geen leegveld in JSON.
Te veel info: een hele pagina tekst als input. AI moet niet verward raken of buiten context gaan. Check of classification en output nog steeds on-topic zijn en of er geen promptoverflow is (met GPT-4 komt dat minder voor, maar bijv. tokenlimiet).
Verboden inhoud in input: bv. user vermeldt â€œhttp://spam.com discount codeâ€. Verwacht: output bevat geen van die zaken (link en code moeten niet terugkomen). Beschrijving mag hooguit zeggen â€œspecial offerâ€ als dat relevant is, maar liever niet omdat prijspromoties niet mogen. Cascade zou die link eruit moeten filteren. Test dit.
Toxic or irrelevant input: als de gebruiker scheldwoorden of off-topic zinnen invoert (â€œThis product sucksâ€), de AI moet beleefd blijven en die delen negeren, focussen op product. Geen toxic output uiteraard.
Non-English input: momenteel is alles gericht op Engels output (behalve de communicatie met Cascade die Nederlands is). Als iemand Spaanse woorden in input heeft, de AI zal toch Engels output geven (Etsy listing zijn we aannemen Engelstalig standaard). Dit is okÃ©, maar test eventueel wat er gebeurt. (Meertaligheid is een toekomstige uitbreiding.)
Personalization toggle test: voer een scenario met personalization = true, en kijk of na Personalization Box Composer implementatie de instructietekst verschijnt en klopt (geen placeholders, correcte voorbeeld). Ook test hetzelfde product met toggle off â€“ dan moet dat stukje verdwijnen.
Gift mode on/off: Neem dezelfde input en run eens met gift_mode true en eens false. Verwacht duidelijke verschillen: met gift_mode emotionele taal en â€œgiftâ€ woorden; zonder gift_mode een meer neutrale beschrijving. Beide moeten valide JSON geven en Etsy-proof zijn.
Fallback scenario: Provoceer een fallback. Bijvoorbeeld kun je tijdelijk de titelprompt saboteren (door een gekke input die parse-error geeft) of simuleer GPT-4 uitval (forceren dat GPT-3.5 turbo gebruikt wordt). Check dat Cascade dit logt en dat er alsnog output komt (desnoods simpeler). Dit is meer voor systeemintegratietest: in logs zou moeten staan fallback_model_used: gpt-3.5 en outputQualityFlags indien relevant.
Deze scenarioâ€™s (en meer die je kunt bedenken) moeten telkens doorlopen worden na een grote change. Waar mogelijk zijn er geautomatiseerde testscripts (Phase 5 validation is genoemd) â€“ gebruik die indien beschikbaar (in repository mogelijk als unit tests of sample inputs in test/ folder). Anders, handmatige tests via de interface of direct function calls. Validatiechecks tijdens tests:
Bij iedere test-run, controleer:
JSON structure: is het resultaat parseable JSON en bevatten alle verplichte keys iets? (title, tags, description mogen niet ontbreken).
Regels compliance: loop de etsy_rules.txt na op output: enkel ASCII (open de output in een hex-viewer of zo nodig), geen verboden woorden.
Veld specifieke checks: 13 tags? Titel â‰¤140? Beschrijving niet leeg en bevat kerninfo? Personalization tekst aanwezig/afwezig zoals bedoeld?
Tone & inhoud: komt de tone overeen met de bedoeling (subjectief check, maar bv. als gift_mode aan was en tekst voelt kil, is iets mis).
Geen onverklaarde output: Bijv. model zegt â€œIâ€™m sorry I cannot do thatâ€ (should never happen door prompt design, maar toch). Of extra apologetic text. Dit moet niet in JSON voorkomen â€“ zou parse invalid maken maar toch.
Log generation: verifieer dat na run in Firestore logs of debug log een entry is gemaakt. Dit is in dev moeilijk direct te zien wellicht, maar project_decisions_and_logs.md of console kan hints geven.
Herhaal tests na elke module: Bijvoorbeeld na Tone Switcher implementatie, herhaal test 9 (tone gift vs non-gift) en 7 (non-English) om te zien dat geen regressie. Na Tag Generator upgrade, kijk specifiek naar test 3 (weinig info) of hij niet nu vreemde tags verzint. Etc. Tevens is er een scorecard mechanisme in de code (quality_scorecard). Als dit is geactiveerd, gebruik het om automatisch een rapport te krijgen van potentieel verbeterpunten per run. Anders, een manual eyeballing door de ontwikkelaar moet volstaan. In het Masterdocument hoofdstuk 12 staat dat bij elke prompt- of logicawijziging, tests in drie modes gedraaid moeten worden: image-only, text-only, hybrid. Houd je daaraan:
Test een run met alleen afbeelding (geen text input) om te zien hoe goed de image classifier + prompt zonder extra context presteert.
Test een run met alleen tekst.
Test gecombineerde input (beeld + beschrijving) om te zien of hiÃ«rarchie klopt (beeldinfo prevaleert).
Edge-case logging: als de AI toch fouten maakt die door de validatie komen, is het belangrijk dat Cascade dat logt en eventueel de gebruiker een waarschuwing geeft (b.v. als een bepaald veld niet kon genereren en leeg is gelaten). Zorg dat dat pad getest wordt zodat we weten dat de gebruiker nooit ongeÃ¯nformeerd blijft. Kortom, voer uitgebreide scenario-tests uit en documenteer de resultaten. Pas indien nodig de code of prompts aan als tests falen, en test opnieuw tot alles slaagt. Dit garandeert een robuuste oplevering.
Logging en Documentatie bijwerken
Transparantie en naspeurbaarheid zijn essentieel in dit project. Daarom moet de AI-developer (of Cascade-agent) bij elke belangrijke actie het logboek bijwerken en de documentatie synchroon houden.
Project Decisions & Logs
Alle belangrijke technische keuzes, veranderingen en bevindingen horen thuis in project_decisions_and_logs.md. Gebruik het bestaande format als leidraad. Voor elke afgeronde deeltaak of discussie maak je een Checkpoint entry zoals:
ğŸ”– Checkpoint â€“ [Onderwerp/Korte titel] â€“ YYYY-MM-DD
**Datum/Tijd:** 2025-07-10 22:15 (UTC+2)  
**Subchat:** [Optioneel: context of gesprekstitel]  
**Domein:** [bijv. Prompts / Backend / Validatie]  

### âœ… Wat is besproken en/of afgerond
- Puntgewijs beschrijven wat er is gedaan of besloten.
- Bijvoorbeeld: Nieuwe `title_prompt_v2.6.txt` gemaakt en geÃ¯ntegreerd.
- Bijvoorbeeld: Tone profile selection algorithme aangepast voor gift_mode (nu default "warm" bij sentimental gift).

### ğŸŸ¡ Openstaande keuzes
- Opsommen of er nog beslissingen moeten volgen.
- Bijvoorbeeld: Nadenken over meertalige ondersteuning (uitgesteld).
- Bijvoorbeeld: Nog te bepalen of trend-termen handmatig lijst nodig hebben.

### ğŸ“ Betrokken bestanden
- Lijst alle bestanden die zijn aangepast of gemaakt:
- `prompts/title_prompt_v2.6.txt` (nieuw)
- `functions/prompt_router.js` (aangepast logica tone select)
- `docs/Project_Overview.md` (aangepast, stappen afgevinkt)
 
### ğŸ” Impact op Masterdocument
- Noteer of, en welke secties in het masterdocument (of dit dossier) moeten worden bijgewerkt door deze verandering.
- Bijvoorbeeld: Sectie 3.2 Promptstructuur geactualiseerd voor nieuwe versie.
- Bijvoorbeeld: Gift mode uitleg uitgebreid in Masterdocument v3.

### ğŸ§  Besproken nuances of gevoeligheden
- Vermeld hier discussiepunten, onverwachte moeilijkheden, of overwegingen.
- Bijvoorbeeld: Overwogen om fallback 3.5-model uit te faseren, maar besloten als safety te houden.
- Bijvoorbeeld: Opgelet dat nieuwe tone-switch geen ongewenste bias introduceert.

### ğŸ’¡ Opgekomen ideeÃ«n of uitbreidingsinzichten
- Noteer interessante ideeÃ«n voor de toekomst die tijdens het werk opkwamen.
- Bijvoorbeeld: Idee om tagsuggesties op basis van Etsy trends API te integreren.
- Bijvoorbeeld: Plan voor "audit mode" waarin AI uitlegt welke regels zijn toegepast per veld.
(Bovenstaand is een template; gebruik je eigen woorden maar houd de structuur aan zodat het logboek uniform blijft.) Wees nauwgezet met timestamps (liefst automatisch invullen), en vermeld versienummers waar relevant. Bijvoorbeeld: â€œprompt_v2.6 in gebruik, eerdere v2.0.0 naar archiveâ€ â€“ zo is later te volgen welke versies live waren. Naast checkpoints horen ook alle afrondingen van de openstaande taken hierin. Bijvoorbeeld zodra Semantic Tag Generator geÃ¯mplementeerd is, maak een checkpoint â€œTags Generator v2 implementedâ€ en noteer de effect op tags output. Het logboek is onze canonical history â€“ bij overdracht aan een ander teamlid moeten ze dit kunnen lezen om alle beslissingen en achtergrond te snappen. Ook bij eventuele fouten in de toekomst is dit de eerste plek waar gekeken wordt wat er is veranderd. Vul het dus eerlijk en compleet in.
Afvinken in Project_Overview.md
Zoals eerder vermeld, staat onderaan Project_Overview.md (Masteranalyse document) een opsomming van stappen/modules die nog open stonden. Elke keer als je zoâ€™n taak hebt voltooid, vink deze af in dat document. Bijvoorbeeld, verander:
- [ ] Prompt Layer v2.6 âŒ Beschrijving, title en tags via gift-style AI
naar:
- [x] Prompt Layer v2.6 âœ… Beschrijving, title en tags via gift-style AI (gerealiseerd op 2025-07-15)
(indien gewenst kun je de datum of een korte notitie toevoegen). Consistente symbolen: in eerdere delen van het doc werden âœ… en âŒ gebruikt in tabellen; voor de checklist kun je ook de Markdown [x] notatie gebruiken, net wat duidelijker is. Dit afvinken is belangrijk zodat bij latere sessies meteen zichtbaar is wat al klaar is. Cascade of een andere agent kan dit lezen en weet â€œokÃ©, dat is al gedaanâ€. Het voorkomt dubbel werk of verwarring.
Documentatie up-to-date houden
Ons project heeft meerdere documenten (Masterdocument, promptoverzicht, etc.). Zorg dat je wijzigingen ook daar doorvoert. In feite zou dit dossier als allesomvattende instructie gebruikt kunnen worden in plaats van losse docs, maar realistisch gezien zal het Masterdocument ook bijgewerkt moeten worden (zeker als stakeholders dat lezen). Bijv: na Prompt v2.6 implementatie, update de promptversie in de promptoverzicht tabel in Masterdocument. Na nieuwe tone profiles, update tone_style doc als nodig. We streven ernaar dat de code, deze instructies, en de documentatie consistent zijn. Divergentie leidt tot fouten wanneer een ander agent later aansluit.
Versiebeheer
Het project staat onder versiebeheer (Git/GitHub is genoemd voor MVP migratie). Hoewel de AI-agent hier niet direct Git-commandoâ€™s uitvoert, moet je wel conceptueel versies bijhouden. Dat betekent:
Versienummers in bestanden verhogen (in meta blok) wanneer significant gewijzigd. Bijvoorbeeld in etsy_rules.txt van 2.0.0 naar 2.1.0 als je iets hebt toegevoegd.
In code of config, als er verwijzingen zijn naar prompt versies (soms laadt prompt_router.js de nieuwste versie op basis van een nummer), pas dat aan. Volgens log is er een mechanisme loadPromptWithVersion.js dat de versie uit het bestand haalt en logt. Check of dat automatisch gaat en of onze aanpassingen daarin opgenomen worden.
Nieuwe promptfiles of scripts committen in de juiste directories (documenteer in log).
Eventueel een git tag of release maken als een mijlpaal bereikt is (optioneel, maar voor interne track).
Omdat Cascade in de IDE draait, kunnen we aannemen dat committen/pushen uiteindelijk door een developer gedaan wordt, maar de AI-agent moet het tot dat punt voorbereiden.
Controle en review
Tenslotte, doorloop na implementatie van alles nogmaals de gehele flow met een frisse blik. Gebruik dit instructiedossier zelf als checklist: loop door doel (is het bereikt?), regels (alle nog steeds consistent?), context (up-to-date?), stappen (alle afgevinkt?), tests (alles groen?). Laat eventueel een collega-agent een review doen door het dossier te lezen of een test run uit te voeren. Bij akkoord: dit dossier dient dan als commandocentrum voor de AI. Iedere toekomstige instructie of uitbreiding kan hiertegen afgezet worden: is het conform de hier beschreven opzet en principes? Zo ja, uitvoer; zo nee, eerst overleg (nieuwe log entry). Door dit alles consequent te doen, waarborg je de continuÃ¯teit van het Etsy AI-Hacker project, zelfs wanneer nieuwe AI-agents zonder context instappen. Elk besluit en elke nuance ligt vast, en de AI kan autonoom verder bouwen op een stevig, gedocumenteerd fundament. Veel succes met de verdere ontwikkeling!